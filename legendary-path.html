<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>เส้นทางแห่งตำนาน - ค้นพบไพ่ตัวตนของคุณ | REFFORTUNE</title>
    <meta name="description" content="ใส่ข้อมูลวันเกิดของคุณเพื่อคำนวณไพ่ประจำเดือนเกิดและไพ่จิตวิญญาณ พร้อมรับคำทำนายเชิงลึกที่ผสมผสานความหมายของไพ่ทั้งสองใบเพื่อค้นพบตัวตนที่แท้จริง" />
    <meta name="keywords" content="ไพ่ตัวตน, ไพ่จิตวิญญาณ, ไพ่ประจำเดือนเกิด, คำนวณไพ่, ดูดวงจากวันเกิด, reffortune" />

    <!-- Favicons & Meta Tags -->
    <link rel="icon" type="image/png" href="icon/favicon-96x96.png" sizes="96x96" />
    <link rel="apple-touch-icon" sizes="180x180" href="icon/apple-touch-icon.png" />
    <link rel="manifest" href="icon/site.webmanifest" />

    <!-- Tailwind CSS & Google Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Tarot Card Data -->
    <script src="tarot-data.js"></script>

    <style>
        body { font-family: 'Noto Sans Thai', sans-serif; background-color: #100a33; color: white; }
        .space-bg { background: radial-gradient(ellipse at bottom, #0f0755 0%, #100a33 100%); position: fixed; inset: 0; z-index: -3; }
        .stars { position: fixed; inset: 0; background: transparent url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/1231630/stars.png) repeat top center; z-index: -2; }
        .twinkling { position: fixed; inset: 0; background: transparent url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/1231630/stars.png) repeat top center; z-index: -1; animation: move-twinkle-back 200s linear infinite; }
        @keyframes move-twinkle-back { from { background-position: 0 0; } to { background-position: -10000px 5000px; } }
        
        .glass-box { background: rgba(30, 27, 75, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(167, 139, 250, 0.3); }
        .text-glow { text-shadow: 0 0 8px rgba(192, 132, 252, 0.6); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-item { opacity: 0; animation: fadeIn 1s ease-out forwards; }
        
        @keyframes fadeOut { to { opacity: 0; transform: scale(0.95); height: 0; padding: 0; margin: 0; border: 0; overflow: hidden; } }
        .fade-out { animation: fadeOut 0.8s ease-out forwards; }


        .form-input { background-color: rgba(0,0,0,0.3); border: 1px solid #4b5563; }
        .form-input:focus { border-color: #a78bfa; box-shadow: 0 0 15px rgba(167, 139, 250, 0.3); }
        
        .result-card { transition: transform 0.5s ease, box-shadow 0.5s ease; }
        .result-card:hover { transform: translateY(-10px) scale(1.05); box-shadow: 0 0 30px rgba(167, 139, 250, 0.5); }

        .interpretation-section h4 {
            font-size: 1.25rem;
            font-weight: bold;
            color: #6ee7b7; /* A bright, spiritual color */
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            padding-bottom: 0.25rem;
            border-bottom: 1px solid rgba(110, 231, 183, 0.3);
        }
        .interpretation-section ul {
            list-style-position: inside;
            margin-left: 0.5rem;
        }
        .interpretation-section li::marker {
            content: '✨ ';
        }
    </style>
</head>
<body class="antialiased">
    <!-- Background -->
    <div class="space-bg"></div>
    <div class="stars"></div>
    <div class="twinkling"></div>

    <!-- Main Content -->
    <div class="relative min-h-screen p-4 md:p-8 flex flex-col items-center">
        <header class="text-center my-8 md:my-12 fade-in-item w-full max-w-4xl">
            <h1 class="text-4xl md:text-5xl font-bold text-glow mb-4">เส้นทางแห่งตำนาน</h1>
            <p class="text-white/80 max-w-2xl mx-auto">ค้นพบไพ่ตัวตนและไพ่จิตวิญญาณของคุณ ผ่านวันเดือนปีเกิด เพื่อเข้าใจแก่นแท้ของตนเอง</p>
            <a href="index.html" class="text-purple-300 hover:text-white mt-6 inline-block">&larr; กลับสู่หน้าแรก</a>
        </header>

        <!-- Input Section -->
        <section id="input-section" class="glass-box p-6 md:p-8 rounded-2xl fade-in-item w-full max-w-2xl" style="animation-delay: 0.2s;">
            <form id="birthdate-form">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label for="day" class="block mb-2 text-sm font-medium text-gray-300">วันเกิด</label>
                        <input type="number" id="day" name="day" class="form-input w-full p-2.5 rounded-lg" placeholder="เช่น 28" min="1" max="31" required value="23">
                    </div>
                    <div>
                        <label for="month" class="block mb-2 text-sm font-medium text-gray-300">เดือน</label>
                        <select id="month" name="month" class="form-input w-full p-2.5 rounded-lg" required>
                            <option value="1">มกราคม</option>
                            <option value="2">กุมภาพันธ์</option>
                            <option value="3">มีนาคม</option>
                            <option value="4">เมษายน</option>
                            <option value="5">พฤษภาคม</option>
                            <option value="6">มิถุนายน</option>
                            <option value="7">กรกฎาคม</option>
                            <option value="8">สิงหาคม</option>
                            <option value="9">กันยายน</option>
                            <option value="10" selected>ตุลาคม</option>
                            <option value="11">พฤศจิกายน</option>
                            <option value="12">ธันวาคม</option>
                        </select>
                    </div>
                    <div>
                        <label for="year" class="block mb-2 text-sm font-medium text-gray-300">ปีเกิด (ค.ศ.)</label>
                        <input type="number" id="year" name="year" class="form-input w-full p-2.5 rounded-lg" placeholder="เช่น 1991" min="1900" max="2024" required value="2000">
                    </div>
                </div>
                <div class="text-center mt-6">
                    <button type="submit" id="submit-button" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-8 rounded-full transition-all duration-300 transform hover:scale-105">
                        คำนวณไพ่ตัวตน
                    </button>
                </div>
            </form>
        </section>

        <!-- Result Section -->
        <section id="result-section" class="hidden w-full max-w-5xl mt-8">
            <!-- NEW: Path Banner Section -->
            <div id="path-banner-container" class="mb-8 text-center fade-in-item">
                <h2 id="path-title" class="text-3xl md:text-4xl font-bold text-glow mb-4"></h2>
                <img id="path-banner-img" src="" alt="Path Banner" class="w-full rounded-lg shadow-2xl aspect-[3/2] object-cover">
            </div>

            <div id="card-display-area" class="grid gap-8">
                <!-- Card containers will be injected here by JavaScript -->
            </div>
            <!-- AI Interpretation -->
            <div id="interpretation-container" class="glass-box p-6 md:p-8 rounded-2xl mt-8 fade-in-item" style="animation-delay: 0.4s;">
                 <h3 class="text-2xl font-bold text-purple-300 mb-4">เสียงสะท้อนจากจิตวิญญาณของคุณ</h3>
                 <div id="interpretation-text" class="text-gray-300 space-y-4 interpretation-section"></div>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('birthdate-form');
            const submitButton = document.getElementById('submit-button');
            const inputSection = document.getElementById('input-section');
            const resultSection = document.getElementById('result-section');
            const cardDisplayArea = document.getElementById('card-display-area');

            // --- Database for Interpretations (Full) ---
            const birthCardInterpretations = {
                "1_10": { pathTitle: "เส้นทางแห่งพลังอำนาจ (The Path of Personal Power)", bannerImage: "/card/ThePathoflPower.png", title: "The Magician และ The Wheel of Fortune", keywords: "การกระทำ, การสำแดงผล, การเปลี่ยนแปลง", interpretation: "The Magician คือไพ่แห่งการกระทำ, การเปลี่ยนแปลง, และการสำแดงผล ในขณะที่ The Wheel of Fortune เตือนเราถึงขีดจำกัดของพลังส่วนบุคคล ไพ่ทั้งสองใบนี้ขอให้คุณผสานความจริงสองอย่างนี้เข้าด้วยกัน: คุณไม่สามารถทำทุกอย่างได้ และในขณะเดียวกัน สิ่งที่คุณทำได้ยังคงมีความหมาย", gifts_detail: ["ในฐานะที่คุณมี The Wheel of Fortune อยู่เคียงข้าง คุณอาจมีความสามารถในการปรับตัวที่แข็งแกร่งกว่าคนส่วนใหญ่", "การเชื่อมต่อกับ The Magician ทำให้คุณมีความสามารถที่ไม่มีใครเทียบได้ในการสร้างสรรค์", "การจับคู่ไพ่นี้บ่งบอกถึงความสามารถในการแก้ปัญหาด้วยวิธีที่สร้างสรรค์"], challenges_detail: ["เมื่อคุณอยู่ภายใต้อิทธิพลของ The Magician คุณอาจคิดว่าคุณทำได้ทุกอย่าง และหากสิ่งต่างๆ แย่ลง ก็ง่ายที่จะคิดว่าเป็นความผิดของคุณทั้งหมด", "The Wheel of Fortune เผยให้เห็นว่ามีอะไรมากมายที่อยู่นอกเหนือการควบคุมของคุณ ซึ่งอาจทำให้คุณสงสัยว่า 'แล้วจะทำไปเพื่ออะไร?'", "อิทธิพลของ The Magician อาจทำให้คุณมองว่าตัวเองสำคัญกว่าคนรอบข้าง"], advice_detail: ["จำไว้ว่า 'สิ่งนี้ก็จะผ่านไป' ทุกช่วงของชีวิต ไม่ว่าจะดี, ร้าย, หรือเฉยๆ ล้วนมีวันสิ้นสุด", "ทำตามความสงสัยของคุณ ไม่จำเป็นต้องเป็นผู้เชี่ยวชาญในทุกเรื่องที่คุณสนใจ", "เพื่อต่อต้านแนวโน้มที่จะหมกมุ่นกับตัวเอง ควรหันมาสนับสนุนคนรอบข้าง"] },
                "2_11": { pathTitle: "เส้นทางแห่งความรู้แจ้ง (The Path of Knowledge)", bannerImage: "https://placehold.co/1536x1024/1d4ed8/ffffff?text=The+Path+of+Knowledge", title: "The High Priestess และ Justice", keywords: "ความรู้, ความสมดุล, ความยุติธรรม", interpretation: "The High Priestess เรียนรู้ผ่านประสบการณ์และสัญชาตญาณ และพอใจกับความลึกลับ ในขณะที่ Justice เรียนรู้ผ่านการวิจัย, การวิเคราะห์ และการยึดมั่นในกฎหมายและระเบียบ ไพ่ทั้งสองใบนี้จะนำทางให้คุณชื่นชมความรู้ทุกรูปแบบและนำมาใช้อย่างง่ายดาย", gifts_detail: ["สัญชาตญาณคือของขวัญที่ยิ่งใหญ่ที่สุดของ The High Priestess มันคือตรรกะที่ทำงานในระดับที่ลึกกว่า", "Justice สนับสนุนให้คุณมองเห็นสิ่งต่างๆ ตามความเป็นจริง โดยไม่มีข้อแก้ตัวสำหรับภาพลวงตาหรือความรู้สึกที่มากเกินไป", "ความกระหายในความรู้ของคุณนั้นเป็นตำนาน! คุณต้องการรู้ให้มากที่สุดเท่าที่จะทำได้ และความจริงคือคุณค่าสูงสุดของคุณ"], challenges_detail: ["ทั้ง Justice และ The High Priestess ชอบที่จะมุ่งเน้นไปที่การแสวงหาความรู้ระดับสูง ซึ่งอาจทำให้ไม่ใส่ใจต่อเรื่องทางโลกหรือเรื่องชั่วคราว", "คุณอาจกดดันตัวเองอย่างมากที่จะเป็นคนที่ฉลาดที่สุดในห้อง ซึ่งเมื่อทำผิดพลาด อาจนำไปสู่ความรู้สึกละอายใจอย่างสุดซึ้ง", "การตีความพลังงานของไพ่สองใบนี้ผิดไปอาจทำให้คุณคิดว่าทุกอย่างมีแค่ถูกหรือผิด โดยไม่มีพื้นที่สำหรับความแตกต่างเล็กๆ น้อยๆ"], advice_detail: ["ในการแสวงหาความรู้ จำไว้ว่าไม่ใช่ทุกสิ่งที่ควรค่าแก่การเรียนรู้จะอยู่ในหนังสือหรือการบรรยายในมหาวิทยาลัย", "ความหลงใหลในการเรียนรู้ของคุณสามารถทำให้คุณกลายเป็นคนที่คนอื่นหันมาขอคำแนะนำ ดังนั้นจงเตรียมพร้อมสำหรับความรับผิดชอบนั้น", "คุณต้องการเวลาในการผ่อนคลาย จงถอยห่างจากคำแนะนำภายนอกเป็นครั้งคราวเพื่อกลับมาเชื่อมต่อกับความเข้าใจของตนเอง"] },
                "3_12": { pathTitle: "เส้นทางแห่งการยอมจำนน (The Path of Surrender)", bannerImage: "/card/sur.png", title: "The Empress และ The Hanged Man", keywords: "การเปิดรับ, การยอมจำนน, การอยู่กับปัจจุบัน", interpretation: "The Empress เชื่อมโยงคุณกับประสบการณ์ทางประสาทสัมผัสของการมีชีวิตอยู่ และเชิญชวนคุณเข้าสู่ความสบายและความสุขทางกาย ในขณะที่ The Hanged Man แสดงถึงการยอมรับความไม่สบายกายเพื่อแลกกับการตรัสรู้ ไพ่ทั้งสองใบนี้เตือนคุณว่าทั้งช่วงเวลาแห่งความสุขสบายและช่วงเวลาแห่งความไม่สบายกายอย่างรุนแรงต่างก็มีที่ทางของมัน", gifts_detail: ["ไพ่ทั้งสองใบนี้สนับสนุนทัศนคติของการมองเข้าไปข้างใน แม้จะในรูปแบบที่แตกต่างกันมาก", "The Empress บ่งบอกถึงความสามารถอันยิ่งใหญ่ในการต้อนรับผู้อื่นด้วยอ้อมแขนที่เปิดกว้าง", "คุณมองโลกผ่านเลนส์ของความอุดมสมบูรณ์ ดังนั้นคุณจึงไม่รังเกียจที่จะแบ่งปันสิ่งที่คุณมี"], challenges_detail: ["ความมีน้ำใจของคุณอาจไปถึงขีดสุด การเสียสละความสำคัญของตัวเองเป็นครั้งคราวเป็นสิ่งจำเป็น แต่หากไม่ระวัง คุณอาจสร้างนิสัยยอมแพ้ในสิ่งที่ตนต้องการ", "ความสบายเรียกหาคุณเหมือนเสียงไซเรน ซึ่งอาจทำให้ยากที่จะตั้งใจทำงาน", "ในบางกรณี The Hanged Man อาจบ่งบอกถึงความยากลำบากในการไว้วางใจผู้อื่น"], advice_detail: ["มีจุดที่พอดีระหว่างความผ่อนคลายสูงสุดของ The Empress และความท่วมท้นของ The Hanged Man จงท้าทายตัวเองในแบบที่จัดการได้", "ฝึกฝนการมองสิ่งต่างๆ จากมุมมองตรงกันข้าม สิ่งนี้สามารถสร้างแรงบันดาลใจให้คุณตัดสินใจแตกต่างไปจากเดิม", "ความสัมพันธ์ของคุณกับ The Empress เน้นย้ำถึงความต้องการของคุณที่จะออกไปสู่โลกกว้างภายนอก"] },
                "3_21": { pathTitle: "เส้นทางแห่งความสมบูรณ์ (The Path of Wholeness)", bannerImage: "/card/ThePathofConnection.png", title: "The Empress และ The World", keywords: "ความรัก, ความสมบูรณ์, การยอมรับ", interpretation: "The Empress ถูกนิยามด้วยหัวใจที่เปิดกว้างและความซาบซึ้งในความงาม ในขณะที่ The World นำมุมมองนั้นไปใช้อย่างกว้างขวางยิ่งขึ้น ไพ่ทั้งสองใบนี้เชิญชวนให้คุณเชื่อมต่อกับทุกสรรพสิ่งในจักรวาลและเปิดใจรับสิ่งต่างๆ ด้วยหัวใจที่เต็มใจ", gifts_detail: ["คุณมีความสามารถตามธรรมชาติในการผูกสัมพันธ์กับผู้อื่น คุณมองเห็นความงดงามของการทำงานร่วมกันเพื่อเป้าหมายที่ยิ่งใหญ่", "ความพึงพอใจเป็นสิ่งสำคัญอย่างยิ่งสำหรับคุณ คุณใช้ความรู้สึกนี้เป็นเข็มทิศที่เชื่อถือได้ในการประเมินโอกาสใหม่ๆ", "คุณไม่ชอบจมอยู่กับรายละเอียดหรือความขัดแย้งเล็กๆ น้อยๆ สัญชาตญาณแรกของคุณคือการก้าวข้ามผ่านมันไป"], challenges_detail: ["คุณยังคงต้องใช้ชีวิตในโลกแห่งความเป็นจริง! ความท้าทายของคุณคือการผสมผสานกิจกรรมที่ยกระดับจิตใจเข้ามาในชีวิตประจำวัน", "เมื่อคนอื่นจมอยู่กับดราม่าไร้สาระในมุมมองของคุณ คุณอาจจะต้องต่อสู้กับความอยากที่จะเบะปาก การเรียนรู้ที่จะอดทนกับผู้อื่นอีกนิดจะทำให้ความสัมพันธ์ของคุณดีขึ้น", "ความกระหายในการเชื่อมต่ออาจทำให้คุณเสี่ยงต่อความสัมพันธ์ที่ไม่ดีต่อสุขภาพ การเรียนรู้ที่จะพูดว่า 'ไม่' เมื่อจำเป็นจะเป็นประโยชน์สูงสุดของคุณ"], advice_detail: ["โลกคือเพื่อนและพันธมิตรที่ยิ่งใหญ่ที่สุดของคุณ! การอยู่ในธรรมชาติจะช่วยฟื้นฟูคุณได้อย่างมาก", "ชีวิตที่วุ่นวายไม่รู้จบไม่ใช่สำหรับคุณ คุณต้องมีช่วงเวลาแห่งการพักผ่อนเพื่อที่จะเป็นตัวของตัวเองในเวอร์ชันที่ดีที่สุด", "The World คือเครื่องเตือนใจว่าการสิ้นสุดนั้นทรงพลัง ดังนั้นเมื่อคุณไปถึงหน้าสุดท้ายของบทหนึ่งในชีวิต จงให้เกียรติและใส่ใจกับช่วงเวลานั้น"] },
                "4_13": { pathTitle: "เส้นทางแห่งการปกป้อง (The Path of Protection)", bannerImage: "/card/ThePathofProtection.png", title: "The Emperor และ Death", keywords: "การสนับสนุน, การปกป้อง, การครอบงำ", interpretation: "The Emperor คือไพ่แห่งอำนาจ, สิทธิอำนาจ, และการควบคุม ในขณะที่ไพ่ Death นั้นรุนแรงยิ่งกว่า มันเป็นตัวแทนของการเปลี่ยนแปลงที่มาถึงเราทุกคนและเราไม่สามารถหนีพ้นได้ตลอดไป ไพ่ทั้งสองใบนี้สร้างแรงบันดาลใจให้คุณรับรู้ถึงการสนับสนุนที่ผู้อื่นต้องการ และใช้ความแข็งแกร่งและความมั่นคงของคุณเพื่อมอบสิ่งนั้น", gifts_detail: ["คุณน่าจะตระหนักดีถึงหน้าที่ของคุณ และภาระของมันก็หนักอึ้งบนบ่าของคุณ ความมุ่งมั่นของคุณที่จะยืนหยัดในสิ่งที่สำคัญนั้นน่าชื่นชม", "The Emperor และ Death เป็นสองพลังที่ไม่มีใครหยุดยั้งได้ในไพ่ทาโรต์ อารมณ์ที่มุ่งมั่นและเด็ดเดี่ยวของคุณอาจทำให้คุณเดือดร้อนบ้างเป็นครั้งคราว แต่มันคือหนึ่งในอาวุธที่สำคัญที่สุดของคุณ", "ความสามารถในการปกป้องและสนับสนุนผู้อื่นของคุณขึ้นอยู่กับความสามารถในการทำให้พวกเขารู้สึกปลอดภัยกับคุณ"], challenges_detail: ["ด้วยความเชื่อมโยงพิเศษกับไพ่ Death คุณอาจประสบกับความกลัวบ่อยที่สุดในพื้นที่ที่คุณไม่แน่นอนหรือไม่สามารถควบคุมได้", "พลังงานของ Emperor นั้นขึ้นชื่อเรื่องความไม่ยืดหยุ่น หากคุณมีมาตรฐานสูงหรือความคาดหวังที่ชัดเจน คุณอาจจะรู้สึกงงงวยเมื่อคนอื่นไม่เป็นไปตามนั้น", "ระวังการดูถูกคนอื่น! เป็นเรื่องปกติที่จะตัดสินคนอื่นบ้างเป็นครั้งคราว แต่ถ้าคนอื่นรู้สึกว่าคุณคิดว่าตัวเองเหนือกว่าอยู่เสมอ พวกเขาจะลำบากใจที่จะไว้ใจคุณ"], advice_detail: ["มองหาการเริ่มต้นในทุกการสิ้นสุด ในไพ่ทาโรต์ ไพ่ Death เป็นจุดเปลี่ยนที่สำคัญ", "คุณเป็นพันธมิตรโดยกำเนิด เมื่อคนในชีวิตของคุณพยายามทำสิ่งที่กล้าหาญหรือเป็นต้นฉบับ พวกเขาอาจต้องการกำลังใจเล็กน้อย", "สิ่งสำคัญคือต้องให้ตัวเองได้พักจากธรรมชาติที่จริงจังของ The Emperor และ Death"] },
                "5_14": { pathTitle: "เส้นทางแห่งประเพณี (The Path of Tradition)", bannerImage: "/card/ThePathofTradition.png", title: "The Hierophant และ Temperance", keywords: "ความเคารพ, ชุมชน, ความอดทน ", interpretation: "The Hierophant เป็นตัวแทนของความตระหนักในความรับผิดชอบต่อชุมชน ในขณะที่ Temperance เป็นสัญลักษณ์ของการสนับสนุนและความสบายใจจากโลกอื่นในยามยากลำบาก ไพ่ทั้งสองใบนี้เรียกร้องให้คุณก้าวขึ้นมาเป็นผู้นำในชุมชนของคุณและทำหน้าที่ของคุณเพื่อช่วยให้ชุมชนก้าวไปในทิศทางที่ดี", gifts_detail: ["ไพ่เหล่านี้ทำให้คุณเป็นที่พักพิงที่อบอุ่นสำหรับเพื่อน, ครอบครัว, และแม้แต่คนรู้จัก", "ในดินแดนของ Temperance สิ่งตรงกันข้ามสามารถหาความกลมกลืนได้ ที่นี่ สิ่งที่เป็นไปไม่ได้ก็เป็นไปได้", "การศึกษาเป็นหนึ่งในประเพณีที่ The Hierophant ให้ความสำคัญมากที่สุด ความอยากรู้อยากเห็นของคุณเป็นทรัพย์สินอันยิ่งใหญ่"], challenges_detail: ["เมื่อใดก็ตามที่ใครคนหนึ่งรู้สึกมีหน้าที่ต่อชุมชนที่กว้างขึ้น พวกเขาก็เสี่ยงที่จะทำอะไรเกินตัว", "สถานะของ The Hierophant ในฐานะผู้นำอาจมาพร้อมกับความยากลำบากในการมองเห็นหรือยอมรับความผิดพลาดของตนเอง", "ความมุ่งมั่นของคุณในการช่วยให้ประเพณีที่ล้าสมัยพัฒนาขึ้นนั้นไม่ใช่เรื่องง่าย"], advice_detail: ["การมีส่วนร่วมในกระบวนการเรียนรู้จะทำให้คุณมีความรู้และกระตือรือร้นมากขึ้นเท่านั้น", "ความสัมพันธ์พิเศษของคุณกับ Temperance ทำให้คุณเป็นคนที่สงบเยือกเย็นในเกือบทุกสถานการณ์", "นอกจากการอ่าน, การฟังบรรยาย, การศึกษาตำราวิชาการแล้ว จงแสวงหาการเรียนรู้ที่มาจากการลงมือทำจริง"] },
                "6_15": { pathTitle: "เส้นทางแห่งอิสรภาพ (The Path of Individuality)", bannerImage: "/card/PathofFreedom.png", title: "The Lovers และ The Devil", keywords: "ทางเลือก, ความปรารถนา, การปลดปล่อย", interpretation: "ในระดับพื้นฐาน The Lovers คือไพ่เกี่ยวกับทางเลือกและการเป็นตัวของตัวเอง ในขณะที่ The Devil ขอให้เราผูกมิตรกับสิ่งที่ทำให้เรากลัว, เรียนรู้จากแรงกระตุ้นที่ทำลายล้าง, และต่อสู้เพื่ออิสรภาพภายในที่ยั่งยืน ไพ่ทั้งสองใบนี้สร้างแรงบันดาลใจให้คุณเรียนรู้ความหมายที่แท้จริงของการปลดปล่อยและลิ้มรสมันอย่างเต็มที่", gifts_detail: ["การมี The Lovers อยู่ข้างกายหมายความว่าคุณสามารถเดินผ่านโลกไปด้วยความเชื่อมั่นในความสามารถของตนเอง", "การก้าวหน้าจากไพ่หนึ่งไปยังอีกไพ่หนึ่งบ่งบอกถึงความสามารถในการเติบโตและความปรารถนาที่จะเรียนรู้และปรับปรุงเมื่อเวลาผ่านไป", "คุณไม่ใช่คนที่จะขอความช่วยเหลือเว้นแต่จะจำเป็นจริงๆ การหาวิธีแก้ปัญหาของตัวเองทำให้คุณรู้สึกภาคภูมิใจอย่างมหาศาล"], challenges_detail: ["ภายใต้อิทธิพลของไพ่ The Devil มันง่ายที่จะสับสนเล็กน้อยเกี่ยวกับความเป็นจริงและสิ่งที่รับรู้", "ทั้ง The Lovers และ The Devil เกี่ยวข้องกับความสุขทางประสาทสัมผัส อิทธิพลของมันอาจบ่งบอกถึงความเปราะบางต่อนิสัยที่ไม่ดีต่อสุขภาพ", "เมื่อคุณหมกมุ่นกับอิสรภาพ มันง่ายที่จะทำอะไรเกินเลยไปเล็กน้อย"], advice_detail: ["จงภาคภูมิใจในความแปลกเล็กๆ น้อยๆ ของคุณ การยอมรับความเป็นเอกลักษณ์ของคุณจะทำให้คุณได้พบกับคนที่เข้าใจและชื่นชมคุณอย่างแท้จริง", "สิ่งสำคัญสำหรับคุณคือการหาคนที่สามารถพูดความจริงได้ หันไปหาพวกเขาเมื่อคุณรู้สึกสับสนหรือท่วมท้น", "ตรวจสอบความหุนหันพลันแล่นของคุณโดยการชะลอตัวลง! หากคุณกำลังพิจารณาการตัดสินใจครั้งใหญ่ การนอนคิดสักคืนจะช่วยคุณได้"] },
                "8_17": { pathTitle: "เส้นทางแห่งความเปราะบาง (The Path of Vulnerability)", bannerImage: "/card/Vulnerability.png", title: "Strength และ The Star", keywords: "ความเปราะบาง, การอยู่รอด, การยอมรับ", interpretation: "Strength คือทั้งหมดที่เกี่ยวกับความเมตตาและการเปิดใจ มันคือพลังที่จะเปราะบางและมั่นคงเมื่อเผชิญกับสิ่งที่อาจทำร้ายคุณ ในขณะที่ The Star คือไพ่เกี่ยวกับการเก็บเล็กผสมน้อยและให้เกียรติความสามารถในการอดทนของคุณ ไพ่ทั้งสองใบนี้นำคุณไปสู่การตระหนักถึงความแข็งแกร่งในรูปแบบที่บริสุทธิ์ที่สุด", gifts_detail: ["ความแข็งแกร่งในไพ่ทาโรต์คือเรื่องของความอ่อนโยน มันคือความกล้าหาญที่จะเสี่ยง, เปิดใจ, และเป็นตัวของตัวเองอย่างแท้จริง", "ด้วย The Star ที่อยู่ข้างกายคุณ คุณมีความสามารถที่สูงขึ้นในการฟื้นตัวจากความยากลำบาก", "คำว่า 'courage' (ความกล้าหาญ) มาจากภาษาละติน 'cor' ที่แปลว่า 'หัวใจ' ไพ่ทั้งสองใบนี้ทำให้คุณได้สัมผัสกับบ่อเกิดแห่งพลัง, ความมุ่งมั่น, และความสงบในหัวใจของคุณ"], challenges_detail: ["คุณอาจดูเหมือนสงบเยือกเย็นและเยือกเย็น แต่ภายใต้ผิวเผิน มีโอกาสดีที่คุณกำลังรับมือกับความเครียดด้วยวิธีที่ไม่ดีต่อสุขภาพ", "The Star คือทั้งหมดที่เกี่ยวกับการอยู่รอด และบางครั้งอาจมาพร้อมกับความรู้สึกผิด", "ความเปราะบางของคุณเป็นของขวัญที่เหลือเชื่อ แต่ด้านกลับของมันคือแนวโน้มที่จะไว้วางใจผู้อื่นมากเกินไปในสถานการณ์ที่ไม่สมควร"], advice_detail: ["ทดลองกับวิธีอื่นในการแสดงความรู้สึกของคุณ อาจผ่านรูปแบบศิลปะเช่นการวาดภาพ, การเต้นรำ, หรือการเขียน", "หากคุณไม่พยายามหาเวลาให้ตัวเอง คุณอาจจะไม่มีวันได้ทำมันเลย จงสร้างพิธีกรรมฟื้นฟูเป็นประจำ", "The Star มักเกี่ยวข้องกับผลพวงของการสูญเสียและการทำลายล้าง นี่คือที่ที่ความโศกเศร้าอาศัยอยู่"] },
                "9_18": { pathTitle: "เส้นทางแห่งความลึกลับ (The Path of Mystery)", bannerImage: "/card/ThePathofHiddenTruth.png", title: "The Hermit และ The Moon", keywords: "ความลึกลับ, ความสันโดษ, ความมืด", interpretation: "The Hermit เป็นแบบอย่างของการใคร่ครวญอย่างลึกซึ้งและปัญญา ในขณะที่ The Moon เป็นตัวแทนของดินแดนแห่งความปรารถนาที่ซ่อนเร้น, ความลับที่เก็บไว้นาน, และแม้กระทั่งแหล่งที่มาของความละอายที่หลอกหลอนที่สุดของเรา ไพ่ทั้งสองใบนี้เรียกร้องให้คุณกล้าหาญและเผชิญหน้ากับสิ่งที่ถูกกดขี่หรือไม่รู้จัก แม้ว่าคุณจะต้องทำมันคนเดียว", gifts_detail: ["The Hermit และ The Moon ทั้งสองใบยอดเยี่ยมในการเก็บความลับ หากนี่คือไพ่เกิดของคุณ คุณน่าจะมีประวัติที่พิสูจน์แล้วในการเคารพความลับ", "เมื่อชีวิตเต็มไปด้วยพายุ คุณสามารถเป็นเหมือนสวรรค์แห่งความสงบสำหรับผู้อื่นได้", "ความสัมพันธ์พิเศษของคุณกับ The Hermit และ The Moon ช่วยให้คุณสบายใจกับด้าน 'มืด' ของชีวิตมากขึ้น"], challenges_detail: ["ทั้ง The Hermit และ The Moon บ่งบอกถึงแนวโน้มที่จะถอยห่างจากโลกแห่งความเป็นจริง", "ความชอบความสันโดษของ The Hermit อาจทำให้คุณรักษาระยะห่างจากผู้อื่น", "เช่นเดียวกับที่ The Moon สามารถเต็มไปด้วยภาพและข้อความที่คลุมเครือ คุณก็สามารถคลุมเครือในการสื่อสารกับผู้อื่นได้เช่นกัน"], advice_detail: ["คุณต้องการเวลาอยู่กับตัวเองมากกว่าคนอื่น จงให้ของขวัญแก่ตัวเองด้วยเวลาส่วนตัวเป็นประจำ", "มองหาคนที่จะสามารถพบคุณในจุดที่คุณอยู่ ผู้ที่จะเคารพขอบเขตและความเป็นส่วนตัวของคุณ", "คุณจะพบความพึงพอใจอย่างมากจากการสังเกตช่วงเวลาที่อ่อนหวานที่คนอื่นมองข้าม"] },
                "1_10_19": { pathTitle: "เส้นทางแห่งวิวัฒนาการ (The Path of Evolution)", bannerImage: "/card/ThePathofcycle.png", title: "The Magician, The Wheel of Fortune, และ The Sun", keywords: "ช่องทางศักดิ์สิทธิ์, ความไม่เที่ยง, ความสุข", interpretation: "The Magician สอนเราว่าเรามีความสามารถอะไรเมื่อเราตั้งใจทำจริงๆ The Wheel of Fortune ทำให้เรานึกถึงการหมุนเวียนอย่างต่อเนื่อง และ The Sun เตือนเราว่าปัญญาและความสุขสามารถมีอยู่ได้ในทุกช่วงของชีวิต ไพ่ทั้งสามใบนี้จะนำทางคุณในการนำทางวัฏจักรของการวิวัฒนาการส่วนบุคคล", gifts_detail: ["ธรรมชาติที่เป็นวัฏจักรของไพ่เหล่านี้ทำให้ยากที่จะใส่ใจกับเรื่องเล็กน้อย คุณรู้ว่ทุกคนต่างอยู่บนการเดินทางของตัวเอง", "ความสัมพันธ์ของคุณกับ The Wheel of Fortune ช่วยให้คุณมองเห็นความไม่เที่ยงของสถานการณ์ในชีวิตในแบบที่คนส่วนใหญ่ไม่เห็น", "ไพ่แต่ละใบในชุดนี้บ่งบอกถึงความไว้วางใจอย่างลึกซึ้งในความสามารถและทักษะของตนเอง และเมื่อรวมพลังกัน คุณจะไม่มีใครหยุดยั้งได้!"], challenges_detail: ["คุณอาจกดดันตัวเองมากเกินไปในบางครั้ง อาจเป็นเพราะคุณรับปากมากเกินไป", "วงล้ออาจจะหมุนต่อไป แต่นั่นไม่ได้หมายความว่ามันจะไปไหน! คุณอาจพบว่าตัวเองวิ่งไปเรื่อยๆ โดยไม่มีความคืบหน้าใดๆ", "การยอมรับโอกาสในการปรับปรุงอาจเป็นเรื่องน่ากลัว! การเปลี่ยนจากรูปแบบที่คุ้นเคยไม่ใช่เรื่องเล็กน้อย"], advice_detail: ["ไพ่ทั้งสามใบนี้เกี่ยวกับวัฏจักรของการเปลี่ยนแปลง และบางครั้งการเปลี่ยนแปลงอาจดูเหมือนความโกลาหลทั้งหมด แต่เมื่อคุณมีบริบทที่จำเป็น สิ่งต่างๆ ก็มักจะสมเหตุสมผลมากขึ้น", "ตั้งคำถามกับความคิดของคุณเกี่ยวกับความสำเร็จ คุณได้รับอนุญาตให้ค้นหาความสุขในรูปแบบอื่น", "เส้นทางของคุณเป็นของคุณ ไม่ใช่ของใครอื่น คำแนะนำของคุณอาจไม่เกี่ยวข้องกับคนในชีวิตคุณเสมอไป"] },
                "2_20": { pathTitle: "เส้นทางแห่งการตื่นรู้ (The Path of Awakening)", bannerImage: "/card/ThePathofKnowledge.png", title: "The High Priestess และ Judgement", keywords: "สัญชาตญาณ, การตื่นรู้, ปัญญา", interpretation: "The High Priestess คือประตูสู่ปัญญาที่ลึกที่สุดของคุณและเป็นเครื่องเตือนใจว่าคุณรู้มากกว่าที่คุณคิด ในทางกลับกัน Judgement คือไพ่แห่งการตื่นรู้และการปรากฏตัวในโลก ไพ่ทั้งสองใบนี้สร้างแรงบันดาลใจให้คุณเข้าใจว่าเมื่อใดที่คุณต้องซ่อนตัวจากโลกและเมื่อใดที่คุณต้องปล่อยให้ตัวเองเฉิดฉาย", gifts_detail: ["ไพ่ทั้งสองใบนี้บ่งบอกถึงความมุ่งมั่นต่อสาเหตุ, เป้าหมาย, หรือความเชื่อบางอย่าง", "สถานการณ์ใดๆ ก็สามารถสอนบทเรียนที่แตกต่างกันได้ร้อยบทเรียน ขึ้นอยู่กับว่าคุณเลือกที่จะมองมันอย่างไร", "คุณมีวิธีที่จะกระโจนเข้าสู่โครงการที่สร้างแรงบันดาลใจให้คุณอย่างเต็มที่"], challenges_detail: ["การอุทิศตนให้กับอุดมคติและเป้าหมายที่สูงส่งอาจทำให้คุณรู้สึกไม่สบายใจในบางครั้ง", "ในขณะที่คุณสร้างสมดุลระหว่างความต้องการของด้านส่วนตัวและด้านสาธารณะของคุณ คุณอาจเผลอเอนเอียงไปทางใดทางหนึ่งมากเกินไป", "ในทางกลับกัน คุณอาจเน้นด้านส่วนตัวของคุณมากเกินไป ซึ่งอาจส่งผลให้เก็บงำสิ่งต่างๆ ไว้เป็นความลับจนไม่ยอมให้ใครเข้ามา"], advice_detail: ["การรู้ว่าอะไรควรเก็บเป็นส่วนตัวและอะไรควรแบ่งปันในที่สาธารณะอาจเป็นเรื่องยุ่งยาก", "ปล่อยให้ตัวเองมีการขึ้นลง คุณจะพบว่าตัวเองเคลื่อนไหวระหว่างสองขั้วนี้ตลอดช่วงชีวิตของคุณ", "ตระหนักถึงความแตกต่างระหว่างคำวิจารณ์ที่เป็นประโยชน์และการจับผิดที่ไร้จุดหมาย"] }
            };
            const astrologyMap = { 'maj01': 'ดาวพุธ', 'maj02': 'ดวงจันทร์', 'maj03': 'ดาวศุกร์', 'maj04': 'ราศีเมษ', 'maj05': 'ราศีพฤษภ', 'maj06': 'ราศีเมถุน', 'maj07': 'ราศีกรกฎ', 'maj08': 'ราศีสิงห์', 'maj09': 'ราศีกันย์', 'maj10': 'ดาวพฤหัสบดี', 'maj11': 'ราศีตุลย์', 'maj12': 'ดาวเนปจูน', 'maj13': 'ราศีพิจิก', 'maj14': 'ราศีธนู', 'maj15': 'ราศีมังกร', 'maj16': 'ดาวอังคาร', 'maj17': 'ราศีกุมภ์', 'maj18': 'ราศีมีน', 'maj19': 'ดวงอาทิตย์', 'maj20': 'ดาวพลูโต', 'maj21': 'ดาวเสาร์' };
            const userProfile = { goal: "อิสระจากหนี้สิน", personality: "ทำงานหนัก ไม่มีวินัยแต่พลังสูง" };

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const day = parseInt(document.getElementById('day').value);
                const month = parseInt(document.getElementById('month').value);
                const year = parseInt(document.getElementById('year').value);
                const yearStr = year.toString();
                const y1 = parseInt(yearStr.substring(0, 2));
                const y2 = parseInt(yearStr.substring(2, 4));

                const initialSum = month + day + y1 + y2;
                let birthCards = [];

                function reduceToSingleDigit(num) {
                    let currentNum = num;
                    while (currentNum > 9) {
                        currentNum = currentNum.toString().split('').reduce((acc, digit) => acc + parseInt(digit), 0);
                    }
                    return currentNum;
                }
                
                let firstCardNum;
                if (initialSum >= 100) {
                    const sumStr = initialSum.toString();
                    firstCardNum = parseInt(sumStr.substring(0, 2)) + parseInt(sumStr.substring(2, 3));
                } else {
                    firstCardNum = initialSum.toString().split('').reduce((acc, digit) => acc + parseInt(digit), 0);
                }

                if (firstCardNum === 19) {
                    birthCards.push(19, 10, 1);
                } else {
                    if (firstCardNum > 21) {
                         firstCardNum = firstCardNum.toString().split('').reduce((acc, digit) => acc + parseInt(digit), 0);
                    }
                    birthCards.push(firstCardNum);

                    let secondCardNum = reduceToSingleDigit(firstCardNum);
                    if (firstCardNum === secondCardNum && firstCardNum <= 9) {
                        secondCardNum = firstCardNum + 9;
                        birthCards.push(secondCardNum);
                    } else if (firstCardNum !== secondCardNum) {
                         birthCards.push(secondCardNum);
                    }
                }
                
                // Hide form and show results
                inputSection.classList.add('fade-out');
                setTimeout(() => {
                    inputSection.style.display = 'none';
                    displayResults(birthCards, initialSum);
                }, 800);
            });

            function displayResults(cardNumbers, initialSum) {
                cardDisplayArea.innerHTML = '';
                
                const interpretationKey = cardNumbers.sort((a, b) => a - b).join('_');
                const data = birthCardInterpretations[interpretationKey];

                // NEW: Populate Banner
                if (data && data.bannerImage) {
                    document.getElementById('path-title').textContent = data.pathTitle;
                    const bannerImg = document.getElementById('path-banner-img');
                    bannerImg.src = data.bannerImage;
                    bannerImg.alt = data.pathTitle;
                }


                if (cardNumbers.length === 2) cardDisplayArea.className = 'grid grid-cols-1 md:grid-cols-2 gap-8 justify-items-center';
                else cardDisplayArea.className = 'grid grid-cols-1 md:grid-cols-3 gap-8 justify-items-center';

                const cardObjects = cardNumbers.map(num => {
                    const cardId = 'maj' + num.toString().padStart(2, '0');
                    return tarotDeck.find(card => card.id === cardId);
                });

                cardObjects.forEach((card, index) => {
                    if (!card) return;
                    const cardContainer = document.createElement('div');
                    cardContainer.className = `text-center fade-in-item`;
                    cardContainer.style.animationDelay = `${index * 0.2}s`;
                    cardContainer.innerHTML = `
                        <h3 class="text-2xl font-bold text-cyan-300 mb-4">ไพ่ใบที่ ${index + 1}</h3>
                        <img src="${card.img}" alt="${card.name}" class="result-card w-48 mx-auto rounded-lg shadow-lg">
                        <p class="mt-4 text-xl font-semibold">${card.name}</p>
                    `;
                    cardDisplayArea.appendChild(cardContainer);
                });

                generateInterpretation(cardObjects, initialSum);
                resultSection.classList.remove('hidden');
                resultSection.scrollIntoView({ behavior: 'smooth' });
            }

            async function generateInterpretation(cards, initialSum) {
                const interpretationDiv = document.getElementById('interpretation-text');
                interpretationDiv.innerHTML = '<p>กำลังเชื่อมต่อกับ AI อัจฉริยะเพื่อสร้างคำทำนายเฉพาะตัวคุณ...</p>';
                submitButton.disabled = true;

                const cardNumbers = cards.map(c => parseInt(c.id.replace('maj', '')));
                const interpretationKey = cardNumbers.sort((a, b) => a - b).join('_');
                const staticData = birthCardInterpretations[interpretationKey];

                if (!staticData) {
                    interpretationDiv.innerHTML = `<p>ขออภัย ไม่พบข้อมูลการตีความสำหรับไพ่ชุดนี้ในขณะนี้</p>`;
                    submitButton.disabled = false;
                    return;
                }

                // Construct a detailed prompt for the AI
                const prompt = `
                    คุณคือโหราจารย์ผู้เชี่ยวชาญด้านการอ่านไพ่ทาโรต์และจิตวิญญาณ จงสร้างคำทำนายส่วนบุคคลในภาษาไทยให้กับผู้ใช้โดยใช้ข้อมูลต่อไปนี้:

                    1.  **ไพ่ตัวตนของผู้ใช้:** ${staticData.title}
                    2.  **ข้อมูลพื้นฐานของไพ่ชุดนี้:**
                        * Keywords: ${staticData.keywords}
                        * ภาพรวม: ${staticData.interpretation}
                        * พรสวรรค์ (Gifts): ${staticData.gifts_detail.join(', ')}
                        * ความท้าทาย (Challenges): ${staticData.challenges_detail.join(', ')}
                        * คำแนะนำ (Advice): ${staticData.advice_detail.join(', ')}
                    3.  **ข้อมูลเชิงตัวเลข (Numerology):**
                        * ผลรวมวันเกิดตั้งต้น: ${initialSum}
                        * เลขไพ่ใบแรก: ${cardNumbers[0]}
                    4.  **ข้อมูลเชิงโหราศาสตร์ (Astrology):**
                        * ${cards.map(card => `${card.name} เชื่อมโยงกับ ${astrologyMap[card.id]}`).join('\n* ')}
                    5.  **ข้อมูลส่วนตัวของผู้ใช้ (Core Memory):**
                        * เป้าหมาย: ${userProfile.goal}
                        * บุคลิก: ${userProfile.personality}

                    **คำสั่ง:**
                    จงสังเคราะห์ข้อมูลทั้งหมดนี้ แล้วเขียนคำทำนายที่มีโครงสร้างดังนี้ โดยใช้ภาษาที่ลึกซึ้งและเข้าถึงจิตวิญญาณ:
                    
                    <h4>ภาพรวมและความสัมพันธ์ของไพ่</h4>
                    <p>[วิเคราะห์ความสัมพันธ์ของไพ่ใบแรกและใบที่สอง ว่าส่งเสริมหรือขัดแย้งกันอย่างไร โดยอ้างอิงจากข้อมูลพื้นฐานและบุคลิกของผู้ใช้]</p>
                    <p>[เชื่อมโยงความหมายของไพ่เข้ากับเป้าหมายของผู้ใช้ (Core Memory) อย่างเป็นรูปธรรม]</p>

                    <h4>มิติทางตัวเลข (Numerology)</h4>
                    <p>[อธิบายความหมายของผลรวมตั้งต้น (${initialSum}) และการลดทอนมาเป็นเลขไพ่ใบแรก (${cardNumbers[0]}) ว่ามันสะท้อนถึงภารกิจหลักในชีวิตของผู้ใช้อย่างไร]</p>

                    <h4>มิติทางโหราศาสตร์ (Astrology)</h4>
                    <p>ไพ่ของคุณมีความเชื่อมโยงกับพลังงานของจักรวาลดังนี้:</p>
                    <ul class="list-disc list-inside ml-4">[สร้างรายการ li สำหรับไพ่แต่ละใบพร้อมคำอธิบายการเชื่อมโยงทางโหราศาสตร์]</ul>

                    <h4>พรสวรรค์ (Gifts)</h4>
                    <ul>[สร้างรายการ li จากข้อมูล gifts_detail]</ul>

                    <h4>ความท้าทาย (Challenges)</h4>
                    <ul>[สร้างรายการ li จากข้อมูล challenges_detail]</ul>

                    <h4>คำแนะนำจากจิตวิญญาณ</h4>
                    <ul>[สร้างรายการ li จากข้อมูล advice_detail]</ul>
                `;

                try {
                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    const apiKey = "AIzaSyDpyxfkrwLy4G5Lh5em-LCi3EYmUUv6zSc"; // API key will be provided by the environment
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        interpretationDiv.innerHTML = text;
                    } else {
                        interpretationDiv.innerHTML = `<p>ขออภัย AI ไม่สามารถสร้างคำทำนายได้ในขณะนี้ โปรดลองอีกครั้ง</p>`;
                    }
                } catch (error) {
                    console.error("Error calling AI API:", error);
                    interpretationDiv.innerHTML = `<p>เกิดข้อผิดพลาดในการเชื่อมต่อกับ AI โปรดตรวจสอบการเชื่อมต่ออินเทอร์เน็ตแล้วลองอีกครั้ง</p>`;
                } finally {
                    submitButton.disabled = false;
                }
            }
        });
    </script>
</body>
</html>
